((/ruminate/docs/outline design))[sync, all]

# Outline design

Main Features
	
	Ruminate Data Consumers / Generators

		WSIWYG Editor
			HTML Version integrates with wick for composite note systems
			UI for tags. 
			UI for integrated queries. 
			Auto update of notes from 
				External changes.
				Internal changes affecting linked notes. 

				Updates must handle the repositioning of text cursors relative to changes.

			CRDT data awarness. 

		Graze Pipeline
			Scoops data from junctions inside text files and pushes it to server
			Pulls data from server and inputes into text files
			These two steps can be augmented by middle men scripst (JS for now) that handle transformation of [source -> * -> note(s)] and [note(s) -> * -> source]
			Junction naming shortcuts, applies to ID and Tags. 
				<DATE> - Replaced with current date.
				<TIME> - Replaced with current time.   

	Server Systems

		Custom backends feeding a standard string based data interface

			Data is updated based on note types
				> Tags :
				> Tags are always updated based on their respective note's date. 

				CRDT - Note data is auto merged based on site data. 
				Plain Ole Data - Note data is updated based on the source date. 

			Server are allowed to share data. All notes MUST be unique amongst all servers.
				Shared based on container ID's 

			query strings used to retrieve data - Query strings can be one of three forms
				ASCII command list. 



				Command string begining with a colon. followed by command, finalized with optional data. 
					{ADD | DELETE | RETRIEVE <this is implied>} : {QUERY_STRING | UID LIST} : {NOTE DATA}
					
					DELETE - delete these UIDs - returns indexed based success/fail list. 
					
					ADD - Expects one new UID or a blank entry. Adds or updates one new note. Expects note information to be in the form
						container/id , tag list, note data.
						
						if UID is provided then note data can be in the form,
						[id]?:[tag]?:[data]?
						If data or tag is present, then tags are replaced in whole. 
						If id is present, then note is relocated if not the same. 

					Query String.
						See ruminate query langauge


			note string buffers used to create / update / remove / retrieve notes
				note delete
					action 170 	0b10101010 	= Delete - Not reversible
				note update
					action 1 	0b00000001	= Update - Ordered by arrival date. 
				container brief - returns note [UIDs, Ids] pairs and sub container [Ids] 
					container id

			note data is just a buffer segmented as such for both upload download, strings are prepended by a 4byte byte size integer:
				
				note action 	 	-> 1 byte action data. Either DELETE | UPDATE or update.
				note uid 			-> 128 byte identifier also contains note creation data. 
				note modified date  -> ignored by and generated by server
				note container id 	-> /note container ... /name
				note tags			-> string of key value pairs. UTF16
				note body 			-> char buffer. Can be pure binary or CRDT encoded data.

			Internally the server handles note search. CRDT data is converted into 

			Note data is either. 
			
	




		Query engine that works off of container ID's and tag, body data.






