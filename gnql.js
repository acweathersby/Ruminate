let fn = {}; const 
/************** Maps **************/

    /* Symbols To Inject into the Lexer */
    symbols = ["&&","||",":"],

    /* Goto lookup maps */
    gt0 = [0,-1,1,2,6,3,8,26,4,-7,31,-1,5,-15,9,7,10,14,12,11,15,17,16],
gt1 = [0,-6,26,36,-7,31,-1,37],
gt2 = [0,-15,31,-1,38],
gt3 = [0,-5,40,-27,9,39,10,14,12,11,15,17,16],
gt4 = [0,-35,42,14,12,11,15,17,16],
gt5 = [0,-39,43,17,16],
gt6 = [0,-41,44],
gt7 = [0,-9,45,46,47,-2,48,-3,55,64,60,67,61,70,62,63,-6,54,9,59,10,14,12,11,15,17,16],
gt8 = [0,-16,77,-1,78,64,60,67,61,70,62,63],
gt9 = [0,-15,31,-1,83],
gt10 = [0,-14,92,-3,55,64,60,67,61,70,62,63,-6,54,9,59,10,14,12,11,15,17,16],
gt11 = [0,-14,93,-3,55,64,60,67,61,70,62,63,-6,54,9,59,10,14,12,11,15,17,16],
gt12 = [0,-14,94,-3,55,64,60,67,61,70,62,63,-6,54,9,59,10,14,12,11,15,17,16],
gt13 = [0,-14,95,-3,55,64,60,67,61,70,62,63,-6,54,9,59,10,14,12,11,15,17,16],
gt14 = [0,-8,96,97,46,47,-2,48,-3,55,64,60,67,61,70,62,63,-6,54,9,59,10,14,12,11,15,17,16],
gt15 = [0,-33,9,98,10,14,12,11,15,17,16],
gt16 = [0,-33,9,99,10,14,12,11,15,17,16],
gt17 = [0,-33,9,100,10,14,12,11,15,17,16],
gt18 = [0,-28,101,104,105,102],
gt19 = [0,-28,116,104,105,117],
gt20 = [0,-28,118,104,105,119],
gt21 = [0,-33,9,121,10,14,12,11,15,17,16],
gt22 = [0,-9,122,46,47,-2,48,-3,55,64,60,67,61,70,62,63,-6,54,9,59,10,14,12,11,15,17,16],
gt23 = [0,-9,123,46,47,-2,48,-3,55,64,60,67,61,70,62,63,-6,54,9,59,10,14,12,11,15,17,16],
gt24 = [0,-9,124,46,47,-2,48,-3,55,64,60,67,61,70,62,63,-6,54,9,59,10,14,12,11,15,17,16],
gt25 = [0,-9,125,46,47,-2,48,-3,55,64,60,67,61,70,62,63,-6,54,9,59,10,14,12,11,15,17,16],
gt26 = [0,-10,126,47,-2,48,-3,55,64,60,67,61,70,62,63,-6,54,9,59,10,14,12,11,15,17,16],
gt27 = [0,-10,127,47,-2,48,-3,55,64,60,67,61,70,62,63,-6,54,9,59,10,14,12,11,15,17,16],
gt28 = [0,-10,128,47,-2,48,-3,55,64,60,67,61,70,62,63,-6,54,9,59,10,14,12,11,15,17,16],
gt29 = [0,-10,129,47,-2,48,-3,55,64,60,67,61,70,62,63,-6,54,9,59,10,14,12,11,15,17,16],
gt30 = [0,-12,131,-15,132,104,105,133],
gt31 = [0,-29,104,105,140],
gt32 = [0,-26,142,141],
gt33 = [0,-29,104,105,146],
gt34 = [0,-29,104,105,147],
gt35 = [0,-18,148,64,60,67,61,70,62,63],
gt36 = [0,-28,132,104,105,133],
gt37 = [0,-13,149,-19,9,150,10,14,12,11,15,17,16],
gt38 = [0,-29,104,105,152],

    // State action lookup maps
    sm0=[0,1,-1,2,-1,3,4,5,6,7,0,-3,8,-2,9,-1,10,11,12,-20,13,14,15,16,-22,17,18],
sm1=[0,19,-3,0,-4,0],
sm2=[0,20,-3,0,-4,0],
sm3=[0,21,-3,0,-4,0,-6,9,-1,10,11,12,-20,13,14,15,16],
sm4=[0,22,-3,0,-4,0,-31,13,14,15,16],
sm5=[0,23,-3,0,-4,0],
sm6=[0,-2,2,-1,3,4,5,6,7,0,-3,8,-53,17,18],
sm7=[0,24,-3,0,-4,0,-5,25,24,-1,24,24,24,-20,24,24,24,24],
sm8=[0,-2,26,-1,26,26,26,26,26,0,-3,26,-53,26,26],
sm9=[0,27,27,2,-1,3,4,5,6,7,0,-3,8,-1,27,27,-1,27,27,27,27,27,27,27,27,27,27,27,-4,27,27,27,27,-2,27,-1,27,27,27,27,27,-9,27,27,27,27,27,27,27,27,27,27,27,27,17,18],
sm10=[0,28,28,28,-1,28,28,28,28,28,0,-3,28,-1,28,28,-1,28,28,28,28,28,28,28,28,28,28,28,-4,28,28,28,28,-2,28,-1,28,28,28,28,28,-9,28,28,28,28,28,28,28,28,28,28,28,28,28,28],
sm11=[0,29,29,29,-1,29,29,29,29,29,0,-3,29,-1,29,29,-1,29,29,29,29,29,29,29,29,29,29,29,-4,29,29,29,29,-2,29,-1,29,29,29,29,29,-9,29,29,29,29,29,29,29,29,29,29,29,29,29,29],
sm12=[0,30,30,30,-1,30,30,30,30,30,0,-3,30,-1,30,30,-1,30,30,30,30,30,30,30,30,30,30,30,-4,30,30,30,30,-2,30,-1,30,30,30,30,30,-9,30,30,30,30,30,30,30,30,30,30,30,30,30,30],
sm13=[0,31,31,2,-1,3,4,5,6,7,0,-3,8,-1,31,31,-1,31,31,31,31,31,31,31,31,31,31,31,-4,31,31,31,31,-2,31,-1,31,31,31,31,31,-9,31,31,31,31,31,31,31,31,31,31,31,31,31,18],
sm14=[0,32,32,32,-1,32,32,32,32,32,0,-3,32,-1,32,32,-1,32,32,32,32,32,32,32,32,32,32,32,-4,32,32,32,32,-2,32,-1,32,32,32,32,32,-9,32,32,32,32,32,32,32,32,32,32,32,32,32,32],
sm15=[0,33,33,33,-1,33,33,33,33,33,0,-3,33,-1,33,33,-1,33,33,33,33,33,33,33,33,33,33,33,-4,33,33,33,33,-2,33,-1,33,33,33,33,33,-9,33,33,33,33,33,33,33,33,33,33,33,33,33,33],
sm16=[0,34,34,34,-1,34,34,34,34,34,0,-3,34,-1,34,34,-1,34,34,34,34,34,34,34,34,34,34,34,-4,34,34,34,34,-2,34,-1,34,34,34,34,34,-9,34,34,34,34,34,34,34,34,34,34,34,34,34,34],
sm17=[0,-2,2,-1,3,4,5,6,7,0,-3,8],
sm18=[0,35,-1,2,-1,3,4,5,6,7,0,-3,8,-15,36,37,38,39,-5,40,-1,41,35,35,35,35,-1,42,43,44,45,46,47,-13,48,49,17,18],
sm19=[0,50,-1,50,-1,50,50,50,50,50,0,-3,50,-3,51,-11,50,50,50,50,-5,50,-1,50,50,50,50,50,-1,50,50,50,50,50,50,-13,50,50,50,50],
sm20=[0,50,-1,50,-1,50,50,50,50,50,0,-3,50,-3,52,-11,50,50,50,50,-5,50,-1,50,50,50,50,50,-1,50,50,50,50,50,50,-13,50,50,50,50],
sm21=[0,50,-1,50,-1,50,50,50,50,50,0,-3,50,-3,53,-11,50,50,50,50,-5,50,-1,50,50,50,50,50,-1,50,50,50,50,50,50,-13,50,50,50,50],
sm22=[0,50,-1,50,-1,50,50,50,50,50,0,-3,50,-3,54,-11,50,50,50,50,-5,50,-1,50,50,50,50,50,-1,50,50,50,50,50,50,-13,50,50,50,50],
sm23=[0,55,-3,0,-4,0,-30,56,-5,42,43,44,45,46,47],
sm24=[0,57,-3,0,-4,0,-30,57,-5,57,57,57,57,57,57],
sm25=[0,57,-3,0,-4,0,-7,58,-22,57,-5,57,57,57,57,57,57],
sm26=[0,57,-3,0,-4,0,-7,59,-22,57,-5,57,57,57,57,57,57],
sm27=[0,57,-3,0,-4,0,-7,60,-22,57,-5,57,57,57,57,57,57],
sm28=[0,61,-3,0,-4,0,-31,13,14,15,16],
sm29=[0,62,-3,0,-4,0],
sm30=[0,63,-3,0,-4,0],
sm31=[0,64,-3,0,-4,0,-5,25,64,-1,64,64,64,-20,64,64,64,64],
sm32=[0,-2,65,-1,65,65,65,65,65,0,-3,65,-53,65,65],
sm33=[0,-2,66,-1,66,66,66,66,66,0,-3,66,-53,66,66],
sm34=[0,67,67,67,-1,67,67,67,67,67,0,-3,67,-1,67,67,-1,67,67,67,67,67,67,67,67,67,67,67,-4,67,67,67,67,-2,67,-1,67,67,67,67,67,-9,67,67,67,67,67,67,67,67,67,67,67,67,67,67],
sm35=[0,68,68,68,-1,68,68,68,68,68,0,-3,68,-1,68,68,-1,68,68,68,68,68,68,68,68,68,68,68,-4,68,68,68,68,-2,68,-1,68,68,68,68,68,-9,68,68,68,68,68,68,68,68,68,68,68,68,68,68],
sm36=[0,69,69,69,-1,69,69,69,69,69,0,-3,69,-1,69,69,-1,69,69,69,69,69,69,69,69,69,69,69,-4,69,69,69,69,-2,69,-1,69,69,69,69,69,-9,69,69,69,69,69,69,69,69,69,69,69,69,69,69],
sm37=[0,70,-3,0,-4,0,-31,70,70,70,70],
sm38=[0,71,-3,0,-4,0,-11,72,73,74,75,-14,71,-1,71,71,71,71],
sm39=[0,76,-3,0,-4,0,-11,76,76,76,76,77,78,79,80,-10,76,-1,76,76,76,76],
sm40=[0,81,-3,0,-4,0,-11,81,81,81,81,81,81,81,81,-10,81,-1,81,81,81,81],
sm41=[0,-2,2,-1,3,4,5,6,7,0,-3,8,-24,40,-1,41,-5,42,43,44,45,46,47,-13,48,49,17,18],
sm42=[0,-2,2,-1,3,4,5,6,7,0,-3,8,-15,36,37,38,39,-5,40,-1,41,-5,42,43,44,45,46,47,-13,48,49,17,18],
sm43=[0,82,-3,0,-4,0,-11,82,82,82,82,82,82,82,82,-10,82,-1,82,82,82,82],
sm44=[0,83,-3,0,-4,0,-11,83,83,83,83,83,83,83,83,-10,83,-1,83,83,83,83],
sm45=[0,84,-3,0,-4,0,-11,84,84,84,84,84,84,84,84,-10,84,-1,84,84,84,84],
sm46=[0,85,-3,0,-4,0,-11,85,85,85,85,85,85,85,85,-10,85,-1,85,85,85,85,85],
sm47=[0,86,87,-2,0,-4,0,-11,86,86,86,86,86,86,86,86,-10,86,-1,86,86,86,86,86,-9,88,89,90,91,92,93,94,95,96,97],
sm48=[0,98,98,-2,0,-4,0,-11,98,98,98,98,98,98,98,98,-10,98,-1,98,98,98,98,98,-9,98,98,98,98,98,98,98,98,98,98],
sm49=[0,99,87,-2,0,-4,0,-11,99,99,99,99,99,99,99,99,-10,99,-1,99,99,99,99,99,-9,88,89,90,91,92,93,94,95,96,97],
sm50=[0,100,100,-2,0,-4,0,-11,100,100,100,100,100,100,100,100,-10,100,-1,100,100,100,100,100,-9,100,100,100,100,100,100,100,100,100,100],
sm51=[0,101,87,-2,0,-4,0,-11,101,101,101,101,101,101,101,101,-10,101,-1,101,101,101,101,101,-9,88,89,90,91,92,93,94,95,96,97],
sm52=[0,102,102,-2,0,-4,0,-11,102,102,102,102,102,102,102,102,-10,102,-1,102,102,102,102,102,-9,102,102,102,102,102,102,102,102,102,102],
sm53=[0,103,-1,103,-1,103,103,103,103,103,0,-3,103,-15,103,103,103,103,-5,103,-1,103,103,103,103,103,-1,103,103,103,103,103,103,-13,103,103,103,103],
sm54=[0,104,-3,0,-4,0,-35,105],
sm55=[0,106,-3,0,-4,0,-35,106],
sm56=[0,107,-3,0,-4,0,-30,107,-5,107,107,107,107,107,107],
sm57=[0,108,-3,0,-4,0],
sm58=[0,109,-3,0,-4,0,-11,109,109,109,109,109,109,109,109,-10,109,-1,109,109,109,109],
sm59=[0,-4,0,-4,0,-29,110],
sm60=[0,-4,0,-4,0,-29,111],
sm61=[0,112,87,-2,0,-4,0,-11,112,112,112,112,112,112,112,112,-4,113,114,115,116,-2,112,-1,112,112,112,112,-10,88,89,90,91,92,93,94,95,96,97],
sm62=[0,-4,0,-4,0,-55,117],
sm63=[0,-4,0,-4,0,-56,118],
sm64=[0,119,-3,0,-4,0,-11,119,119,119,119,119,119,119,119,-10,119,-1,119,119,119,119,119,-9,88,89,90,91,92,93,94,95,96,97],
sm65=[0,120,-3,0,-4,0,-11,120,120,120,120,120,120,120,120,-10,120,-1,120,120,120,120,120],
sm66=[0,121,-3,0,-4,0,-11,121,121,121,121,121,121,121,121,-10,121,-1,121,121,121,121,121,-6,122,123,124,121,121,121,121,121,121,121,121,121,121],
sm67=[0,125,-3,0,-4,0,-11,125,125,125,125,125,125,125,125,-10,125,-1,125,125,125,125,125],
sm68=[0,126,-3,0,-4,0,-11,126,126,126,126,126,126,126,126,-10,126,-1,126,126,126,126,126],
sm69=[0,127,-3,0,-4,0,-11,127,127,127,127,127,127,127,127,-10,127,-1,127,127,127,127,127],
sm70=[0,128,-3,0,-4,0,-11,128,128,128,128,128,128,128,128,-10,128,-1,128,128,128,128,128],
sm71=[0,129,-3,0,-4,0,-11,129,129,129,129,129,129,129,129,-10,129,-1,129,129,129,129,129,-9,88,89,90,91,92,93,94,95,96,97],
sm72=[0,130,-3,0,-4,0,-11,130,130,130,130,130,130,130,130,-10,130,-1,130,130,130,130,130],
sm73=[0,131,-3,0,-4,0,-11,131,131,131,131,131,131,131,131,-10,131,-1,131,131,131,131,131,-9,88,89,90,91,92,93,94,95,96,97],
sm74=[0,132,-3,0,-4,0,-11,132,132,132,132,132,132,132,132,-10,132,-1,132,132,132,132,132],
sm75=[0,-4,0,-4,0,-30,56,-5,42,43,44,45,46,47],
sm76=[0,112,87,-2,0,-4,0,-35,112,-9,88,89,90,91,92,93,94,95,96,97],
sm77=[0,133,-3,0,-4,0,-29,133,-1,133,133,133,133],
sm78=[0,134,-3,0,-4,0,-11,134,134,134,134,-14,134,-1,134,134,134,134],
sm79=[0,135,-3,0,-4,0,-11,135,135,135,135,135,135,135,135,-10,135,-1,135,135,135,135],
sm80=[0,-1,136,2,-1,3,4,5,6,7,0,-3,8,-53,17,18],
sm81=[0,137,-3,0,-4,0,-11,137,137,137,137,137,137,137,137,-10,137,-1,137,137,137,137,137,-9,88,89,90,91,92,93,94,95,96,97],
sm82=[0,138,-3,0,-4,0,-11,138,138,138,138,138,138,138,138,-10,138,-1,138,138,138,138,138],
sm83=[0,-1,139,139,-1,139,139,139,139,139,0,-3,139,-53,139,139],
sm84=[0,-4,0,-4,0,-23,140],
sm85=[0,141,-3,0,-4,0,-11,141,141,141,141,141,141,141,141,-10,141,-1,141,141,141,141],
sm86=[0,142,-3,0,-4,0,-11,142,142,142,142,142,142,142,142,-10,142,-1,142,142,142,142,142],
sm87=[0,143,-3,0,-4,0,-11,143,143,143,143,143,143,143,143,-10,143,-1,143,143,143,143,143,-9,143,143,143,143,143,143,143,143,143,143],
sm88=[0,-1,144,-2,0,-4,0],
sm89=[0,-1,145,-2,0,-4,0],
sm90=[0,146,-3,0,-4,0,-11,146,146,146,146,146,146,146,146,-10,146,-1,146,146,146,146,146],
sm91=[0,147,-3,0,-4,0,-11,147,147,147,147,147,147,147,147,-10,147,-1,147,147,147,147,147],
sm92=[0,148,-3,0,-4,0,-35,148],
sm93=[0,149,-3,0,-4,0,-11,149,149,149,149,149,149,149,149,-10,149,-1,149,149,149,149],
sm94=[0,150,-3,0,-4,0,-11,150,150,150,150,150,150,150,150,-10,150,-1,150,150,150,150],
sm95=[0,151,-3,0,-4,0,-11,151,151,151,151,151,151,151,151,-10,151,-1,151,151,151,151,151],
sm96=[0,-1,152,152,-1,152,152,152,152,152,0,-3,152,-53,152,152],
sm97=[0,153,-3,0,-4,0,-11,153,153,153,153,153,153,153,153,-10,153,-1,153,153,153,153,153,-9,153,153,153,153,153,153,153,153,153,153],

    // Symbol Lookup map
    lu = new Map([[1,1],[2,2],[4,3],[8,4],[16,5],[32,6],[64,7],[128,8],[256,9],[512,10],[3,11],[264,11],[200,13],[201,14],[".",15],["?",16],[":",17],["f",18],["filter",19],["FILTER",20],["&&",21],["AND",22],["And",23],["and",24],["||",25],["OR",26],["Or",27],["or",28],["NOT",29],["Not",30],["not",31],["!",32],["is",33],["=",34],["equals",35],["that",36],[null,4],["(",38],[")",39],["#",40],["|",41],["s",42],["sort",43],["SORT",44],[",",45],["created",46],["CREATED",47],["modifier",48],["MODIFIED",49],["size",50],["SIZE",51],["to",52],["TO",53],["-",54],["DEC",55],["dec",56],["decending",57],["DECENDING",58],["down",59],["ASC",60],["asc",61],["ascending",62],["ASCENDING",63],["up",64],["\"",65],["'",66],["*",67],["\\",68]]),

    //Reverse Symbol Lookup map
    rlu = new Map([[1,1],[2,2],[3,4],[4,8],[5,16],[6,32],[7,64],[8,128],[9,256],[10,512],[11,3],[11,264],[13,200],[14,201],[15,"."],[16,"?"],[17,":"],[18,"f"],[19,"filter"],[20,"FILTER"],[21,"&&"],[22,"AND"],[23,"And"],[24,"and"],[25,"||"],[26,"OR"],[27,"Or"],[28,"or"],[29,"NOT"],[30,"Not"],[31,"not"],[32,"!"],[33,"is"],[34,"="],[35,"equals"],[36,"that"],[4,null],[38,"("],[39,")"],[40,"#"],[41,"|"],[42,"s"],[43,"sort"],[44,"SORT"],[45,","],[46,"created"],[47,"CREATED"],[48,"modifier"],[49,"MODIFIED"],[50,"size"],[51,"SIZE"],[52,"to"],[53,"TO"],[54,"-"],[55,"DEC"],[56,"dec"],[57,"decending"],[58,"DECENDING"],[59,"down"],[60,"ASC"],[61,"asc"],[62,"ascending"],[63,"ASCENDING"],[64,"up"],[65,"\""],[66,"'"],[67,"*"],[68,"\\"]]),

    // States 
    state = [sm0,
sm1,
sm2,
sm3,
sm4,
sm5,
sm6,
sm7,
sm8,
sm9,
sm10,
sm11,
sm11,
sm12,
sm13,
sm14,
sm15,
sm15,
sm16,
sm16,
sm16,
sm16,
sm16,
sm16,
sm16,
sm17,
sm18,
sm19,
sm20,
sm21,
sm22,
sm23,
sm24,
sm25,
sm26,
sm27,
sm28,
sm29,
sm30,
sm31,
sm32,
sm33,
sm34,
sm35,
sm36,
sm37,
sm38,
sm39,
sm40,
sm41,
sm41,
sm41,
sm41,
sm42,
sm43,
sm44,
sm6,
sm6,
sm6,
sm45,
sm46,
sm46,
sm46,
sm46,
sm47,
sm48,
sm48,
sm49,
sm50,
sm50,
sm51,
sm52,
sm52,
sm53,
sm53,
sm53,
sm53,
sm54,
sm55,
sm6,
sm56,
sm56,
sm56,
sm57,
sm42,
sm42,
sm42,
sm42,
sm42,
sm42,
sm42,
sm42,
sm58,
sm58,
sm58,
sm58,
sm59,
sm60,
sm61,
sm62,
sm63,
sm64,
sm65,
sm66,
sm67,
sm68,
sm69,
sm69,
sm69,
sm69,
sm69,
sm70,
sm70,
sm70,
sm70,
sm70,
sm71,
sm72,
sm73,
sm74,
sm75,
sm76,
sm77,
sm77,
sm77,
sm77,
sm78,
sm78,
sm78,
sm78,
sm79,
sm80,
sm81,
sm82,
sm83,
sm83,
sm83,
sm84,
sm85,
sm85,
sm86,
sm87,
sm88,
sm89,
sm89,
sm89,
sm90,
sm91,
sm92,
sm93,
sm94,
sm94,
sm95,
sm96,
sm97],

/************ Functions *************/

    max = Math.max, min = Math.min,

    //Error Functions
    e = (tk,r,o,l,p)=>{if(l.END)l.throw("Unexpected end of input");else if(l.ty & (264)) l.throw(`Unexpected space character within input "${p.slice(l)}" `) ; else l.throw(`Unexpected token ${l.tx}" `)}, 
    eh = [e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e,
e],

    //Empty Function
    nf = ()=>-1, 

    //Environment Functions
    
redv = (ret, fn, plen, ln, t, e, o, l, s) => {        ln = max(o.length - plen, 0);        const slice = o.slice(-plen);        o.length = ln + 1;        o[ln] = fn(slice, e, l, s, o, plen);        return ret;    },
rednv = (ret, Fn, plen, ln, t, e, o, l, s) => {        ln = max(o.length - plen, 0);        const slice = o.slice(-plen);        o.length = ln + 1;        o[ln] = new Fn(slice, e, l, s, o, plen);        return ret;    },
redn = (ret, plen, t, e, o) => {        if (plen > 0) {            let ln = max(o.length - plen, 0);            o[ln] = o[o.length - 1];            o.length = ln + 1;        }        return ret;    },
shftf = (ret, fn, t, e, o, l, s) => (fn(o, e, l, s), ret),
C20_query_body=function (sym){this.container = sym[0];this.filter = sym[1];this.sort = sym[2];},
C21_query_body=function (sym){this.container = null;this.filter = sym[0];this.sort = sym[1];},
C22_query_body=function (sym){this.container = sym[0];this.filter = null;this.sort = sym[1];},
C23_query_body=function (sym){this.container = sym[0];this.filter = sym[1];this.sort = null;},
C24_query_body=function (sym){this.container = null;this.filter = null;this.sort = sym[0];},
C25_query_body=function (sym){this.container = null;this.filter = sym[0];this.sort = null;},
C26_query_body=function (sym){this.container = sym[0];this.filter = null;this.sort = null;},
C27_query_body=function (){this.container = null;this.filter = null;this.sort = null;},
R30_container_identifier_list=sym=>(((sym[1] !== null) ? sym[0].push(sym[1]) : null,sym[0])),
R31_container_identifier_list=sym=>(sym[0] !== null) ? [sym[0]] : [],
C40_container_clause=function (sym){this.containers = sym[0];this.id = sym[1];},
C41_container_clause=function (sym){this.containers = null;this.id = sym[0];},
R50_container_identifier=sym=>sym[0],
R70_filter_clause=sym=>sym[1],
R71_filter_clause=()=>null,
C90_and_expression=function (sym){this.type = "AND";this.left = sym[0];this.right = sym[2];},
C100_or_expression=function (sym){this.type = "OR";this.left = sym[0];this.right = sym[2];},
C110_not_expression=function (sym){this.type = "NOT";this.left = sym[1];},
C140_wrapped_expression=function (sym){this.type = "MATCH";this.value = sym[0];},
C141_wrapped_expression=function (sym){this.type = "TAGEQ";this.tag = sym[1];this.val = sym[3];},
R160_sort_parameter_list=sym=>(((sym[1] !== null) ? sym[0].push(sym[2]) : null,sym[0])),
C200_created_expression=function (sym){this.type = "CREATED";this.val = sym[1];this.order = sym[2] || 1;},
C201_created_expression=function (sym){this.type = "CREATED";this.val = null;this.order = sym[1] || 1;},
C202_created_expression=function (sym){this.type = "CREATED";this.val = sym[1];this.order = 1;},
C203_created_expression=function (){this.type = "CREATED";this.val = null;this.order = 1;},
C220_modified_expression=function (sym){this.type = "MODIFIED";this.val = sym[1];this.order = sym[2] || 1;},
C221_modified_expression=function (sym){this.type = "MODIFIED";this.val = null;this.order = sym[1] || 1;},
C222_modified_expression=function (sym){this.type = "MODIFIED";this.val = sym[1];this.order = 1;},
C223_modified_expression=function (){this.type = "MODIFIED";this.val = null;this.order = 1;},
C240_size_expression=function (sym){this.type = "SIZE";this.val = sym[1];this.order = sym[2] || 1;},
C241_size_expression=function (sym){this.type = "SIZE";this.val = null;this.order = sym[1] || 1;},
C242_size_expression=function (sym){this.type = "SIZE";this.val = sym[1];this.order = 1;},
C243_size_expression=function (){this.type = "SIZE";this.val = null;this.order = 1;},
C250_tag_expression=function (sym){this.type = "TAG";this.tag = sym[1];this.val = sym[2];this.order = sym[3] || 1;},
C251_tag_expression=function (sym){this.type = "TAG";this.tag = sym[1];this.val = null;this.order = sym[2] || 1;},
C252_tag_expression=function (sym){this.type = "TAG";this.tag = sym[1];this.val = sym[2];this.order = 1;},
C253_tag_expression=function (sym){this.type = "TAG";this.tag = sym[1];this.val = null;this.order = 1;},
R280_length_expression=sym=>[sym[0],sym[1]],
R281_length_expression=sym=>[sym[0]],
R310_order=()=>-1,
R311_order=()=>1,
C340_identifier=function (sym){this.ids = sym[0];},
R360_string_data_val_list=sym=>sym[0] + sym[1],
R361_string_data_val_list=sym=>sym[0] + "",

    //Sparse Map Lookup
    lsm = (index, map) => {    if (map[0] == 0xFFFFFFFF) return map[index + 1];    for (let i = 1, ind = 0, l = map.length, n = 0; i < l && ind <= index; i++) {        if (ind !== index) {            if ((n = map[i]) > -1) ind++;            else ind += -n;        } else return map[i];    }    return -1;},

    //State Action Functions
    state_funct = [(...v)=>(redn(2051,0,...v)),
e=>74,
e=>98,
e=>94,
e=>90,
e=>86,
e=>82,
e=>78,
e=>110,
e=>114,
e=>118,
e=>122,
e=>130,
e=>134,
e=>138,
e=>142,
e=>54,
e=>102,
(...v)=>redn(5,1,...v),
(...v)=>redn(1031,1,...v),
(...v)=>rednv(2055,C26_query_body,1,0,...v),
(...v)=>rednv(2055,C25_query_body,1,0,...v),
(...v)=>rednv(2055,C24_query_body,1,0,...v),
(...v)=>rednv(4103,C41_container_clause,1,0,...v),
e=>166,
(...v)=>redv(3079,R31_container_identifier_list,1,0,...v),
(...v)=>rednv(34823,C340_identifier,1,0,...v),
(...v)=>redv(33799,R31_container_identifier_list,1,0,...v),
(...v)=>redn(35847,1,...v),
(...v)=>redn(38919,1,...v),
(...v)=>redn(37895,1,...v),
(...v)=>redv(36871,R361_string_data_val_list,1,0,...v),
(...v)=>redn(39943,1,...v),
(...v)=>redn(41991,1,...v),
(...v)=>redv(7175,R71_filter_clause,1,0,...v),
e=>198,
e=>202,
e=>206,
e=>210,
e=>214,
e=>226,
e=>262,
e=>266,
e=>274,
e=>278,
e=>286,
e=>290,
e=>230,
e=>234,
(...v)=>redn(6151,1,...v),
e=>294,
e=>298,
e=>302,
e=>306,
(...v)=>redv(17415,R71_filter_clause,1,0,...v),
e=>318,
(...v)=>redn(15367,1,...v),
e=>322,
e=>326,
e=>330,
(...v)=>rednv(2059,C23_query_body,2,0,...v),
(...v)=>rednv(2059,C22_query_body,2,0,...v),
(...v)=>rednv(2059,C21_query_body,2,0,...v),
(...v)=>rednv(4107,C40_container_clause,2,0,...v),
(...v)=>redv(3083,R30_container_identifier_list,2,0,...v),
(...v)=>redv(5131,R50_container_identifier,2,0,...v),
(...v)=>redv(33803,R30_container_identifier_list,2,0,...v),
(...v)=>redv(36875,R360_string_data_val_list,2,0,...v),
(...v)=>redv(40971,R70_filter_clause,2,0,...v),
(...v)=>redv(7179,R70_filter_clause,2,0,...v),
(...v)=>redn(9223,1,...v),
e=>338,
e=>342,
e=>346,
e=>350,
(...v)=>redn(10247,1,...v),
e=>354,
e=>358,
e=>362,
e=>366,
(...v)=>redn(11271,1,...v),
(...v)=>rednv(14343,C140_wrapped_expression,1,0,...v),
(...v)=>redn(14343,1,...v),
(...v)=>redn(32775,1,...v),
(...v)=>redn(18439,1,...v),
(...v)=>rednv(20487,C203_created_expression,1,0,...v),
e=>414,
e=>426,
e=>430,
e=>434,
e=>438,
e=>442,
e=>446,
e=>450,
e=>454,
e=>458,
e=>462,
(...v)=>redn(19463,1,...v),
(...v)=>rednv(22535,C223_modified_expression,1,0,...v),
(...v)=>redn(21511,1,...v),
(...v)=>rednv(24583,C243_size_expression,1,0,...v),
(...v)=>redn(23559,1,...v),
(...v)=>redn(6155,2,...v),
(...v)=>redv(17419,R70_filter_clause,2,0,...v),
e=>482,
(...v)=>redv(16391,R31_container_identifier_list,1,0,...v),
(...v)=>redn(15371,2,...v),
(...v)=>rednv(2063,C20_query_body,3,0,...v),
(...v)=>rednv(11275,C110_not_expression,2,0,...v),
e=>522,
(...v)=>redn(8199,1,...v),
(...v)=>rednv(25611,C253_tag_expression,2,0,...v),
e=>538,
e=>542,
e=>546,
e=>550,
e=>554,
e=>558,
(...v)=>rednv(20491,C202_created_expression,2,0,...v),
(...v)=>rednv(20491,C201_created_expression,2,0,...v),
(...v)=>redv(28679,R281_length_expression,1,0,...v),
e=>574,
e=>578,
e=>582,
(...v)=>redv(31751,R310_order,1,0,...v),
(...v)=>redv(31751,R311_order,1,0,...v),
(...v)=>redn(29703,1,...v),
(...v)=>redn(30727,1,...v),
(...v)=>rednv(22539,C222_modified_expression,2,0,...v),
(...v)=>rednv(22539,C221_modified_expression,2,0,...v),
(...v)=>rednv(24587,C242_size_expression,2,0,...v),
(...v)=>rednv(24587,C241_size_expression,2,0,...v),
(...v)=>rednv(9231,C90_and_expression,3,0,...v),
(...v)=>rednv(10255,C100_or_expression,3,0,...v),
(...v)=>redv(14351,R70_filter_clause,3,0,...v),
e=>606,
(...v)=>rednv(25615,C252_tag_expression,3,0,...v),
(...v)=>rednv(25615,C251_tag_expression,3,0,...v),
(...v)=>redn(12295,1,...v),
e=>614,
(...v)=>redv(32783,R70_filter_clause,3,0,...v),
(...v)=>rednv(20495,C200_created_expression,3,0,...v),
(...v)=>redv(28683,R280_length_expression,2,0,...v),
e=>618,
(...v)=>redn(26631,1,...v),
(...v)=>rednv(22543,C220_modified_expression,3,0,...v),
(...v)=>rednv(24591,C240_size_expression,3,0,...v),
(...v)=>redv(16399,R160_sort_parameter_list,3,0,...v),
(...v)=>rednv(14355,C141_wrapped_expression,4,0,...v),
(...v)=>redn(13319,1,...v),
(...v)=>rednv(25619,C250_tag_expression,4,0,...v),
(...v)=>redn(12299,2,...v),
(...v)=>redv(27659,R70_filter_clause,2,0,...v)],

    //Goto Lookup Functions
    goto = [v=>lsm(v,gt0),
nf,
nf,
v=>lsm(v,gt1),
v=>lsm(v,gt2),
nf,
v=>lsm(v,gt3),
nf,
nf,
v=>lsm(v,gt4),
nf,
nf,
nf,
nf,
v=>lsm(v,gt5),
nf,
nf,
nf,
nf,
nf,
nf,
nf,
nf,
nf,
nf,
v=>lsm(v,gt6),
v=>lsm(v,gt7),
nf,
nf,
nf,
nf,
v=>lsm(v,gt8),
nf,
nf,
nf,
nf,
v=>lsm(v,gt9),
nf,
nf,
nf,
nf,
nf,
nf,
nf,
nf,
nf,
nf,
nf,
nf,
v=>lsm(v,gt10),
v=>lsm(v,gt11),
v=>lsm(v,gt12),
v=>lsm(v,gt13),
v=>lsm(v,gt14),
nf,
nf,
v=>lsm(v,gt15),
v=>lsm(v,gt16),
v=>lsm(v,gt17),
nf,
nf,
nf,
nf,
nf,
v=>lsm(v,gt18),
nf,
nf,
v=>lsm(v,gt19),
nf,
nf,
v=>lsm(v,gt20),
nf,
nf,
nf,
nf,
nf,
nf,
nf,
nf,
v=>lsm(v,gt21),
nf,
nf,
nf,
nf,
v=>lsm(v,gt22),
v=>lsm(v,gt23),
v=>lsm(v,gt24),
v=>lsm(v,gt25),
v=>lsm(v,gt26),
v=>lsm(v,gt27),
v=>lsm(v,gt28),
v=>lsm(v,gt29),
nf,
nf,
nf,
nf,
nf,
nf,
v=>lsm(v,gt30),
nf,
nf,
v=>lsm(v,gt31),
nf,
v=>lsm(v,gt32),
nf,
nf,
nf,
nf,
nf,
nf,
nf,
nf,
nf,
nf,
nf,
nf,
v=>lsm(v,gt33),
nf,
v=>lsm(v,gt34),
nf,
v=>lsm(v,gt35),
v=>lsm(v,gt36),
nf,
nf,
nf,
nf,
nf,
nf,
nf,
nf,
nf,
v=>lsm(v,gt37),
v=>lsm(v,gt38),
nf,
nf,
nf,
nf,
nf,
nf,
nf,
nf,
nf,
nf,
nf,
nf,
nf,
nf,
nf,
nf,
nf,
nf,
nf,
nf,
nf,
nf];

function getToken(l, SYM_LU) {
    if (l.END) return 0; /*$eof*/

    switch (l.ty) {
        case 2:
            //*
            if (SYM_LU.has(l.tx)) return 14;
            /*/
                console.log(l.tx, SYM_LU.has(l.tx), SYM_LU.get(l.tx))
                if (SYM_LU.has(l.tx)) return SYM_LU.get(l.tx);
            //*/
            return 2;
        case 1:
            return 1;
        case 4:
            return 3;
        case 256:
            return 9;
        case 8:
            return 4;
        case 512:
            return 10;
        default:
            return SYM_LU.get(l.tx) || SYM_LU.get(l.ty);
    }
}

/************ Parser *************/

function parser(l, e = {}) {

    fn = e.functions;

    l.IWS = false;
    l.PARSE_STRING = true;

    if (symbols.length > 0) {
        symbols.forEach(s => { l.addSymbol(s) });
        l.tl = 0;
        l.next();
    }

    const recovery_chain = [];

    const o = [],
        ss = [0, 0];

    let time = 1000000,
        RECOVERING = 100,
        RESTARTED = true,
        tk = getToken(l, lu),
        p = l.copy(),
        sp = 1,
        len = 0,
        reduceStack = (e.reduceStack = []),
        ROOT = 10000,
        off = 0;

    outer:

        while (time-- > 0) {

            const fn = lsm(tk, state[ss[sp]]) || 0;

            let r,
                gt = -1;

            if (fn == 0) {
                /*Ignore the token*/
                tk = getToken(l.next(), lu);
                continue;
            }

            if (fn > 0) {
                r = state_funct[fn - 1](tk, e, o, l, ss[sp - 1]);
            } else {

                if (tk == 14) {
                    tk = lu.get(l.tx);
                    continue;
                }

                if (l.ty == 8 && l.tl > 1) {
                    // Make sure that special tokens are not getting in the way
                    l.tl = 0;
                    // This will skip the generation of a custom symbol
                    l.next(l, false);

                    if (l.tl == 1)
                        continue;
                }

                if (RECOVERING > 1 && !l.END) {

                    if (tk !== lu.get(l.ty)) {
                        tk = lu.get(l.ty);
                        continue;
                    }

                    if (tk !== 13) {
                        tk = 13;
                        RECOVERING = 1;
                        continue;
                    }
                }

                tk = getToken(l, lu);

                const recovery_token = eh[ss[sp]](tk, e, o, l, p, ss[sp], (lex) => getToken(lex, lu));

                if (RECOVERING > 0 && recovery_token >= 0) {
                    RECOVERING = -1; /* To prevent infinite recursion */
                    tk = recovery_token;
                    l.tl = 0; /*reset current token */
                    continue;
                }
            }

            switch (r & 3) {
                case 0:
                    /* ERROR */

                    if (tk == "$eof")
                        l.throw("Unexpected end of input");

                    l.throw(`Unexpected token [${RECOVERING ? l.next().tx : l.tx}]`);
                    return [null];

                case 1:
                    /* ACCEPT */
                    break outer;

                case 2:

                    /*SHIFT */
                    o.push(l.tx);
                    ss.push(off, r >> 2);
                    sp += 2;
                    l.next();
                    off = l.off;
                    tk = getToken(l, lu);
                    RECOVERING++;
                    break;

                case 3:
                    /* REDUCE */
                    RESTARTED = true;

                    len = (r & 0x3FC) >> 1;

                    ss.length -= len;
                    sp -= len;
                    gt = goto[ss[sp]](r >> 10);

                    if (gt < 0)
                        l.throw("Invalid state reached!");

                    if (reduceStack.length > 0) {
                        let i = reduceStack.length - 1;
                        while (i > -1) {
                            let item = reduceStack[i--];

                            if (item.index == sp) {
                                item.action(output)
                            } else if (item.index > sp) {
                                reduceStack.length--;
                            } else {
                                break;
                            }
                        }
                    }

                    ss.push(off, gt);
                    sp += 2;
                    break;
            }
        }
    return o[0];
}; const gnql = parser;